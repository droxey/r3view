{% extends "base.html" %}
{% load static compress %}

{% block endhead %}{% endblock %}
{% block left %}{% endblock %}


{% block center %}
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-btns">
            <a href="" class="minimize">−</a>
          </div>
          <h2 class="panel-title">r3view: Getting Started</h2>
          <p>Live code review and collaboration at the click of a button.</p>
          </div>
          <div class="panel-body">
            <p class="text-center">
              <a class="btn btn-info btn-lg" href="{% url 'launch' %}" data-toggle="modal" data-target=".bs-example-modal-static">
                <i class="fa fa-magic"></i> Launch a Live Coding Session
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <div class="panel-btns">
              <a href="" class="minimize">−</a>
            </div>
            <h2 class="panel-title">r3wind: Past Sessions</h2>
              <p>Need to revisit a past r3view session? Don't worry. We have your back.</p>
            </div>
            <div class="panel-body">
              {% if sessions %}
              <ul>
                {% for session in sessions %}
                  <li>
                    <a href="{{ session.get_absolute_url }}">{{ session.name }}<strong> @ {{ session.created }}</strong></a>
                  </li>
                {% endfor %}
              </ul>
              {% else %}
                <p>No sessions yet!</p>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block endbody %}
  {% compress js %}
    <script>
      $(document).on('click', '#session-form button[type="submit"]', function(event) {
        event.preventDefault();
        var form = $('#session-form'),
            url = form.attr('action'),
            data = form.serialize();
         $.post(url, data, function(json) {
            document.location.href = json.url;
         });
      });
    </script>
  {% endcompress %}
{% endblock %}
